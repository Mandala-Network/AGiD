# Repository Folder Analysis & Consolidation Plan

## ðŸ“Š Current Structure Analysis

### ESSENTIAL FOLDERS (Keep)

**`src/`** - Core source code
- Purpose: All TypeScript source code for AGIdentity
- Size: 27 subdirectories
- Status: âœ… Essential - this is your application
- Keep: YES

**`.planning/`** - Project planning documents
- Purpose: Codebase analysis, roadmaps, phases
- Contents: STACK.md, ARCHITECTURE.md, PROJECT.md, etc.
- Status: âœ… Useful documentation
- Keep: YES

**`MPC-DEV/`** - MPC reference implementations
- Purpose: Cosigner servers, wallet-toolbox-mpc, reference code
- Contents: cosigner-servers/ (running on 3001, 3002)
- Status: âœ… Critical - cosigners run from here
- Keep: YES

**`message-box-client/`** - Updated MessageBox with MPC support
- Purpose: MessageBox client library with MPC patches
- Contents: Source code with MPC pre-derivation
- Status: âœ… Essential - provides MPC MessageBox integration
- Keep: YES

**`utilities/`** - Helper scripts (just organized)
- Purpose: Test and utility scripts
- Contents:
  - discover-payments.ts (payment discovery)
  - get-wallet-address.ts (get MPC address)
  - test-wallet-tools.ts (validation)
  - QUICKSTART.ts (demo)
- Status: âœ… Useful utilities
- Keep: YES

---

### GENERATED FOLDERS (Keep but gitignore)

**`dist/`** - Compiled JavaScript
- Purpose: TypeScript build output
- Size: 40 subdirectories
- Status: âš ï¸ Should be in .gitignore (regenerated by `npm run build`)
- Keep: YES (but gitignore)

**`node_modules/`** - Dependencies
- Purpose: npm packages
- Size: 978 directories
- Status: âš ï¸ Already in .gitignore
- Keep: YES (gitignored)

**`data/`** - Runtime wallet data
- Purpose: mpc-wallet.sqlite (UTXO storage)
- Size: 1 file
- Status: âš ï¸ Should be in .gitignore (runtime data)
- Keep: YES (but gitignore)

**`logs/`** - Runtime logs
- Purpose: Cosigner logs, PIDs
- Size: 4 files
- Status: âš ï¸ Should be in .gitignore
- Keep: YES (but gitignore)

---

### QUESTIONABLE FOLDERS (Review)

**`extensions/`** - Duplicate OpenClaw plugin?
- Purpose: Local copy of agidentity-tools
- Status: âŒ DUPLICATE - real plugin is in ~/.openclaw/extensions/
- Recommendation: **DELETE** (outdated duplicate)

**`website/`** - Random website prompt
- Purpose: Contains LOVABLE_PROMPT.md
- Status: âŒ Unclear purpose, doesn't relate to AGIdentity
- Recommendation: **DELETE** (unrelated)

**`ls/`** - Empty directory
- Purpose: None (appears to be typo)
- Status: âŒ Empty
- Recommendation: **DELETE**

**`storage/`** - Empty directory
- Purpose: None
- Status: âŒ Empty
- Recommendation: **DELETE**

---

## ðŸ—‘ï¸ Consolidation Plan

### Step 1: Delete Unnecessary Folders

```bash
# Remove duplicates and empty directories
rm -rf extensions/        # Duplicate (real one in ~/.openclaw)
rm -rf website/           # Unrelated
rm -rf ls/                # Typo
rm -rf storage/           # Empty
```

### Step 2: Update .gitignore

```bash
# Add to .gitignore
dist/
data/
logs/
*.sqlite
*.log
node_modules/
.env
```

### Step 3: Organize Documentation

**Current docs (root level):**
```
MPC-GAP-ANALYSIS.md       â† Keep (for expert review)
SESSION-SUMMARY.md        â† Keep (session notes)
README.md                 â† Keep (main readme)
.env.example              â† Keep (template)
```

**Recommendation:**
- Move MPC-GAP-ANALYSIS.md to `docs/` folder
- Move SESSION-SUMMARY.md to `docs/`
- Create `docs/` for all documentation
- Keep README.md at root

---

## ðŸ“‹ Proposed Final Structure

```
agidentity/
â”œâ”€â”€ src/                      # Source code (keep)
â”‚   â”œâ”€â”€ gateway/              # AGIdentity Gateway
â”‚   â”œâ”€â”€ messaging/            # MessageBox integration
â”‚   â”œâ”€â”€ wallet/               # MPC wallet
â”‚   â”œâ”€â”€ cli/                  # CLI tool
â”‚   â”œâ”€â”€ tools/                # OpenClaw tools
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ MPC-DEV/                  # MPC infrastructure (keep)
â”‚   â”œâ”€â”€ mpc-test-app/
â”‚   â”‚   â””â”€â”€ cosigner-servers/ # Cosigners run from here
â”‚   â”œâ”€â”€ wallet-toolbox-mpc/   # MPC wallet library
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ message-box-client/       # MessageBox with MPC (keep)
â”‚   â”œâ”€â”€ src/
â”‚   â””â”€â”€ dist/
â”‚
â”œâ”€â”€ .planning/                # Project docs (keep)
â”‚   â”œâ”€â”€ codebase/             # Architecture analysis
â”‚   â””â”€â”€ phases/               # Development phases
â”‚
â”œâ”€â”€ utilities/                # Helper scripts (keep)
â”‚   â”œâ”€â”€ discover-payments.ts
â”‚   â”œâ”€â”€ get-wallet-address.ts
â”‚   â”œâ”€â”€ test-wallet-tools.ts
â”‚   â””â”€â”€ QUICKSTART.ts
â”‚
â”œâ”€â”€ docs/                     # Documentation (create)
â”‚   â”œâ”€â”€ MPC-GAP-ANALYSIS.md
â”‚   â””â”€â”€ SESSION-SUMMARY.md
â”‚
â”œâ”€â”€ dist/                     # Build output (gitignore)
â”œâ”€â”€ data/                     # Runtime data (gitignore)
â”œâ”€â”€ logs/                     # Runtime logs (gitignore)
â”œâ”€â”€ node_modules/             # Dependencies (gitignore)
â”‚
â”œâ”€â”€ .env.example              # Config template
â”œâ”€â”€ .gitignore                # Git exclusions
â”œâ”€â”€ deploy-mpc.sh             # Deploy script
â”œâ”€â”€ stop-mpc.sh               # Stop script
â”œâ”€â”€ package.json              # Project manifest
â””â”€â”€ README.md                 # Main readme
```

**Removed:**
- âŒ extensions/ (duplicate)
- âŒ website/ (unrelated)
- âŒ ls/ (typo)
- âŒ storage/ (empty)

**Added:**
- âœ… docs/ (organized documentation)

---

## ðŸŽ¯ What Each Folder Is Actually For

| Folder | Purpose | Keep? | Notes |
|--------|---------|-------|-------|
| `src/` | AGIdentity source code | âœ… YES | Your application |
| `.planning/` | Project planning docs | âœ… YES | GSD workflow files |
| `MPC-DEV/` | MPC infrastructure | âœ… YES | Cosigners run from here |
| `message-box-client/` | MessageBox library | âœ… YES | MPC-aware client |
| `utilities/` | Helper scripts | âœ… YES | Just organized |
| `dist/` | Build output | âœ… YES | But gitignore |
| `data/` | Wallet database | âœ… YES | But gitignore |
| `logs/` | Runtime logs | âœ… YES | But gitignore |
| `node_modules/` | Dependencies | âœ… YES | Already gitignored |
| `extensions/` | OLD plugin copy | âŒ DELETE | Duplicate |
| `website/` | Unrelated content | âŒ DELETE | Not AGIdentity |
| `ls/` | Empty/typo | âŒ DELETE | Mistake |
| `storage/` | Empty | âŒ DELETE | Unused |

---

## ðŸ”§ Recommended Actions

### 1. Delete Unnecessary (Safe)
```bash
rm -rf extensions/ website/ ls/ storage/
```

### 2. Create docs/ folder
```bash
mkdir -p docs
mv MPC-GAP-ANALYSIS.md docs/
mv SESSION-SUMMARY.md docs/
```

### 3. Update .gitignore
```bash
# Ensure these are ignored
dist/
data/
logs/
*.sqlite
*.log
*.pid
.env
node_modules/
```

### 4. Clean git tracking
```bash
git rm --cached -r dist/ data/ logs/
```

---

## ðŸ“Š Size Analysis

**Current:**
```
Total directories: 15
Essential: 6 (src, .planning, MPC-DEV, message-box-client, utilities, docs)
Generated: 4 (dist, data, logs, node_modules)
Unnecessary: 4 (extensions, website, ls, storage)
```

**After cleanup:**
```
Total directories: 11
Essential: 7 (added docs/)
Generated: 4
Unnecessary: 0
```

**Cleaner structure: 15 â†’ 11 folders (-27%)**

---

## âœ… Recommended Commands

Execute these to clean up:

```bash
# 1. Delete unnecessary
rm -rf extensions/ website/ ls/ storage/

# 2. Organize docs
mkdir -p docs
mv MPC-GAP-ANALYSIS.md docs/
mv SESSION-SUMMARY.md docs/

# 3. Update .gitignore
cat >> .gitignore << 'EOF'

# Build output
dist/

# Runtime data
data/
logs/
*.sqlite
*.sqlite-*
*.pid

# Logs
*.log
EOF

# 4. Remove from git tracking
git rm --cached -r dist/ data/ logs/ 2>/dev/null || true

# 5. Commit
git add -A
git commit -m "chore: consolidate folder structure

Removed:
- extensions/ (duplicate plugin)
- website/ (unrelated)
- ls/, storage/ (empty)

Organized:
- Created docs/ for documentation
- Moved analysis docs to docs/
- Updated .gitignore for generated files

Result: Cleaner structure (15 â†’ 11 folders)"
```

Want me to execute this cleanup?
